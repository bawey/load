
@Watched
select 'frBsy: '||context||'G'||geoslot.toString()||'IO'||io.toString() as label, timestamp, fractionBusy as value from FMMInput where fractionBusy > 0;

@Watched
select 'frWrn: '||context||'G'||geoslot.toString()||'IO'||io.toString() as label, timestamp, fractionWarning as value from FMMInput where fractionWarning > 0;

@Description('want to copy datatypes, hence the stream will be created from window')
create window DeadtimeTmp.win:keepall() as select context as kontext, geoslot, io from FMMInput;
		createConclusionStream(ep, "DeadtimeAlarm", "(title String) copyfrom DeadtimeTmp ;

on FMMInput(fractionWarning>0 or fractionBusy>0) as fmi insert into DeadtimeAlarm select "
				+ "'fmm deadtime' as title, fmi.context as kontext, fmi.geoslot as geoslot, fmi.io as io where "
				+ "(select count(*) from DeadtimeAlarm.win:keepall() where kontext=fmi.context and geoslot=fmi.geoslot and io = fmi.io)=0;

on FMMInput(fractionWarning=0, fractionBusy=0) as fmi delete from Conclusions as c where"
				+ " c.title.toString()='fmm deadtime' and c.kontext.toString() = fmi.context and c.io.toString() = fmi.io.toString() and c.geoslot.toString() = fmi.geoslot.toString();
